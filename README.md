# Лабораторные работы по курсу «Системы ввода-вывода»

1. Драйвер cимвольного устройства (lab-0 это попытка запуска выданного примера).
2. Драйвер блочного устройства.
3. Драйвер сетевого устройства.
4. Зачетная работа: моделирование SPI шины в SystemC

# Комментарии

Чтобы в принципе попробовать установть модуль ядра, нужно иметь 
виртуальную машину — контейнер Docker не подойдет. 

Можно запариться со всякими VMware, VirtulaBox, и сидеть в них через
графическое окружение. Но вообще, лабы довольно простые и даже писать код можно
без линтеров. Так что Canonical Multipass идеально подходит для этого, это
удобный пользовательский интерфейс к qemu, чтобы запускать виртуалки с Ubuntu.

## Работа с Multipass

Для начала нужно скачать утилиту с официального сайта https://multipass.run/install

Далее, чтобы создать виртуальную машину, нужно выбрать нужный образ:

```shell
multipass find
```

В выведенном списке можно найти "Aliases" для нужной версии ОС, для выполнеия
работ подходит версия 22.04 aka `jammy` (ядро 5.15).

Теперь можно создать машину с выбранным образом:

```shell
multipass launch --name dev-io jammy
```
- обращаю внимание, что поменять имя после создания нельзя (нет команды)

Тут может потребоваться скачать образ и всяко разное. После создания к
виртуальной машине можно подключить командой

```shell
multipass shell dev-io
```
- Автоматически вызывается команда `multipass start`, если машина не запущена.

Теперь можно примонтировать директорию с проектом внутрь машины:

```shell
multipass mount D:/Projects/itmo-io-systems/ dev-io:/mnt/io-systems/
```
- Может потребоватья остановить машину;
- возможно, можно при запуске задать опцию `--mount`;
- возможно нужно включить какую-то настройку безопасности.

После этого, директория с проектом должна быть доступна в директории
`/mnt/io-systems`.

Теперь нужно установить нужные для разработки пакеты, для удобства составлен
скрипт [`res/setup.sh`](./res/setup.sh), но на нем не установить права на
исполне, так что используйте `cat` и copy-paste для простоты.

- для систем отличных от Ubuntu, может потребоваться другой пакет с заголовками
  (см. https://askubuntu.com/questions/75709/how-do-i-install-kernel-header-files)

Посте установки зависимостей, всё должено работать:

```shell
cd lab-0
sudo make
```

И дальше как описано в отчете к lab-1: [docs/lab1/README.md](./docs/lab1/README.md).

