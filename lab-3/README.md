# Лабораторная №2. Вариант 8.

## Задание

### Цель работы

> Получить знания и навыки разработки драйверов сетевых интерфейсов для
> операционной системы Linux.

### Задачи

1. Написать драйвер сетевого интерфейса, удовлетворяющий требованиям:
    1. Драйвер должен создавать виртуальный сетевой интерфейс в ОС Linux.
    2. Созданный сетевой интерфейс должен перехватывать пакеты родительского
       интерфейса (eth0 или другого).
    3. Сетевой интерфейс должен реализовывать логику работы с перехваченным
       трафиком в соответствии с заданиями по вариантам.
    4. Должна иметься возможность просмотра статистики работы созданного
       интерфейса.
2. Для подготовки отчета выполнить:
    1. Склонировать на github.com структуру репозитория (должен быть
       склонирован при выполнении первой лабораторной работы):
       https://gitlab.se.ifmo.ru/io-systems/report-skeleton
    2. Выложить исходные файлы и скрипты для сборки драйвера в папку lab3
       репозитория
    3. Написать отчет о проделанной работе в файл lab3/README.md репозитория по
       предложенному шаблону, размещенному в файле.

### Текст варианта 8

Вариант 8 дает остаток 3 по модулю 5, такой вариант задания я и беру.

> Пакеты протокола UDP, адресуемые на конкретный порт. Вывести порт отправителя
> и получателя. Номер порта определяется исполнителями. 
>
> Состояние разбора пакетов необходимо выводить в кольцевой буфер ядра.

## Полезные материалы

1. [https://losst.ru/wp-content/uploads/2016/08/BOOK_PRACTIS_245.pdf](https://losst.ru/wp-content/uploads/2016/08/BOOK_PRACTIS_245.pdf)
   (стр. 149)
2. Пример сетевого драйвера: https://github.com/a3f/mitm0/blob/master/mitm.c

- - -

# Комментарии

Лаба достаточно простая: для выполнения задания нужно немного кода, но нужно
знать, что нужно написать. 

При этом новый шаблон лабы почему-то некорректно ведет себя на разных ОС с 
разными ядрами. Может произойти одно из 3х: заработает, система подвиснет, система крашнется.

Поэтому для выполнения ЛР преподаватель подготовил удаленные машины (ПЛИС с Linux) на которых
шаблонный код работает.

Порт, по которому происходит фильтрация, проще всего задать как макрос, но можно вынести его 
в параметр загрузки модуля, так же как и название сетевого устройства.

